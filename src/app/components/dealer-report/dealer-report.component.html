<div class="d-flex align-items-stretch">
  <!-- Sidebar Navigation-->
  <nav id="sidebar" *ngIf="showBigHeader">
    <!-- Sidebar Header-->
     <!-- Sidebar Header-->
     <div class="sidebar-header d-flex align-items-center">
      <div class="header-logo"><img src="../../../assets/img/Bimeda-Logo-White.png" alt="..." class="img-fluid">
      </div>

  </div>
  <hr>

  <!-- Sidebar Navidation Menus--><span class="heading">Bimeda Genuine</span>
  <hr>
  <ul class="list-unstyled">
    <li class="#"><a href="#" routerLink="/dashboard"> <img class="sidenav-icon" src="../../../assets/img/Icons/rocket2_w.png"><span>Dashboard</span> </a></li>
    <li class="#"><a href="#" routerLink="/Customer"> <img class="sidenav-icon" src="../../../assets/img/Icons/customer_white.png"><span>Customers</span></a></li>
    <li class="active"><a href="#" routerLink="/Dealer"> <img class="sidenav-icon" src="../../../assets/img/Icons/customer2_w.png"><span>Dealers</span> </a></li>
    <li><a href="#" routerLink="/product"> <img class="sidenav-icon" src="../../../assets/img/Icons/Products_white.png"><span>Products</span> </a></li>
    <li><a href="#" routerLink="/qr"> <img class="sidenav-icon" src="../../../assets/img/Icons/qr_report_white.png"><span>QRs</span> </a></li>
    <li class=""><a href="#" routerLink="/feedback"> <img class="sidenav-icon" src="../../../assets/img/Icons/complains-white.png"><span>Feedback</span></a></li>

      <li class="#"><a href="#" routerLink="/dealer-performance"> <img class="sidenav-icon" src="../../../assets/img/Icons/Dealer Performance_white.png"><span>Dealer Performance</span> </a></li>
      <li class="#"><a href="#" routerLink="/genuinity-heatmap"> <img class="sidenav-icon" src="../../../assets/img/Icons/map_w.png"><span>Genuinity Heat Map</span></a></li>
      <li class="#"><a href="#" routerLink="/help"> <img class="sidenav-icon" src="../../../assets/img/Icons/Help-white.png"><span>Help </span></a></li>
      <!-- </ul><span class="heading">Extras</span>
      <ul class="list-unstyled"> -->
      <div class="sidebar-header d-flex align-items-center">
          <div class="bottom-logo"><img src="../../../assets/img/bray transparent sidemenu logo.png" alt="..."
                  class="img-fluid"></div>

      </div>


    <!-- <li> <a href="#"> <i class="icon-chart"></i>Demo </a></li>
      <li> <a href="#"> <i class="icon-settings"></i>Demo </a></li>
      <li> <a href="#"> <i class="icon-writing-whiteboard"></i>Demo </a></li>
      <li> <a href="#"> <i class="icon-chart"></i>Demo </a></li> -->

</ul>
  </nav>
  <nav id="sidebar" *ngIf="showSmallHeader" class="shrinked">
    <!-- Sidebar Header-->
     <!-- Sidebar Header-->
     <div class="sidebar-header d-flex align-items-center">
      <div class="header-logo"><img src="../../../assets/img/Bimeda-Logo-White.png" alt="..." class="img-fluid">
      </div>

  </div>
  <hr>

  <!-- Sidebar Navidation Menus--><span class="heading">Bimeda Genuine</span>
  <hr>
  <ul class="list-unstyled">
    <li class="#" mdbTooltip="Dashboard" placement="right"><a href="#" routerLink="/dashboard"> <img class="sidenav-icon" src="../../../assets/img/Icons/rocket2_w.png" ><span>Dashboard</span> </a></li>
    <li class="#" mdbTooltip="Customers" placement="right"><a href="#" routerLink="/Customer"> <img class="sidenav-icon" src="../../../assets/img/Icons/customer_white.png"><span>Customers</span> </a></li>
    <li class="active" mdbTooltip="Dealers" placement="right"><a href="#" routerLink="/Dealer"> <img class="sidenav-icon" src="../../../assets/img/Icons/customer2_w.png"><span>Dealers</span> </a></li>
    <li mdbTooltip="Products" placement="right"><a href="#" routerLink="/product"> <img class="sidenav-icon" src="../../../assets/img/Icons/Products_white.png"><span>Products </span> </a></li>
    <li mdbTooltip="QRs" placement="right"><a href="#" routerLink="/qr"> <img class="sidenav-icon" src="../../../assets/img/Icons/qr_report_white.png"><span>QRs</span> </a></li>
    <li class="#" mdbTooltip="Feedback" placement="right"><a href="#" routerLink="/feedback"> <img class="sidenav-icon" src="../../../assets/img/Icons/complains-white.png"><span>Feedback </span></a></li>
    <li class="#" mdbTooltip="Dealer Performance" placement="right"><a href="#" routerLink="/dealer-performance"> <img class="sidenav-icon" src="../../../assets/img/Icons/Dealer Performance_white.png"><span>Dealer Performance</span> </a></li>
    <li class="#" mdbTooltip="Genuinity Heat Map" placement="right"><a href="#" routerLink="/genuinity-heatmap"> <img class="sidenav-icon" src="../../../assets/img/Icons/map_w.png"><span>Genuinity Heat Map</span></a></li>
    <li class="#" mdbTooltip="Help" placement="right"><a href="#" routerLink="/help"> <img class="sidenav-icon" src="../../../assets/img/Icons/Help-white.png"><span>Help</span> </a></li>
      <!-- </ul><span class="heading">Extras</span>
      <ul class="list-unstyled"> -->
      <div class="sidebar-header d-flex align-items-center">
          <div class="bottom-logo"><img src="../../../assets/img/bray transparent sidemenu logo.png" alt="..."
                  class="img-fluid"></div>

      </div>


    <!-- <li> <a href="#"> <i class="icon-chart"></i>Demo </a></li>
      <li> <a href="#"> <i class="icon-settings"></i>Demo </a></li>
      <li> <a href="#"> <i class="icon-writing-whiteboard"></i>Demo </a></li>
      <li> <a href="#"> <i class="icon-chart"></i>Demo </a></li> -->

</ul>
  </nav>
  <!-- Sidebar Navigation end-->
  <div class="page-content" [ngClass]="{'active': showSmallHeader}">
    <div class="page-header">
      <div class="container-fluid">
        <!-- <h2 class="h5 no-margin-bottom">Dashboard</h2> -->
        <header class="header">   
          <nav class="navbar navbar-expand-lg">
     
            <div class="container-fluid d-flex align-items-center justify-content-between">
              <div class="navbar-header">
         
                <button class="sidebar-toggle" (click)="sideBarToggleFunction()"><i class="fa fa-align-justify"></i></button>
                  
                    <!-- <mdb-icon fas icon="rocket" style="color: #d0112b;font-size: 21px;vertical-align: -2px;"></mdb-icon>  -->
                    <img src="../../../assets/img/Icons/bimedaiconsupdated/dealer.png" style="height: 29px; width: 29px;">
                    Dealers
                <!-- Sidebar Toggle Btn-->
                
              </div>
              <div class="right-menu list-inline no-margin-bottom">    
            
                <!-- Log out               -->
                <div class="list-inline-item logout">                  
                  <span class="d-none d-sm-inline"> 
                    <img src="{{url}}{{profilePicture}}" style="float: right;" width="100%" class="rounded-circle usr-img .profile-img mr-2">
            </span></div>
            <div class="list-inline-item logout">                  
                <span class="d-none d-sm-inline"> 
                    <h3 class="profile-paragraph-title m-0" >Welcome Super Admin! </h3>
                    <h4 class="profile-paragraph m-0">{{userName | titlecase}} </h4>
          </span></div>
              <div class="list-inline-item logout">                  <span class="d-none d-sm-inline"> <img class="pl-4" src="../../../assets/img/logout_btn.png" style="cursor: pointer;float:right;"
                mdbTooltip="Logout" placement="bottom" (click)="logout();"/></span></div>
              </div>
            </div>
          </nav>
        </header>
      </div>
    </div>
    <section class="no-padding-top no-padding-bottom" style="border-bottom: 2px solid #d1d1d1;">
      <div class="container-fluid">
        <div class="row">
            <div class="col-lg-6 pb-2" style="font-weight: 500;font-family: 'Segoe UI';">
                <span style="color:#000;font-size: 20px;">Filters</span>
            </div>
            <div class="col-lg-6 pb-2" style="font-weight: 500;font-family: 'Segoe UI';">
                <span style="float: right;"> <button routerLink="/add-dealer" mat-raised-button color="add-dealer">Add Dealer</button></span>
            </div>
       
        </div>
    </div>
        <div class="container-fluid" >
          <form [formGroup]='dealerSearchFilterForm'>
          <div class="row" style="padding-top: 10px;padding-bottom: 10px;">
            <div class="col-md-3">
              <!-- <mat-form-field appearance="outline">
                <mat-label>To</mat-label>
                <input matInput placeholder="Enter Date">
              </mat-form-field> -->
              <div class="form-group" style="padding-bottom:9px;">
                <label class="label">Registration Date</label><br>
                  <input type="date" id="filepicker" class="form-control input" placeholder="To" formControlName="startDate"
                      >
              </div>
            </div>
            <div class="col-md-3 pl-0">
              <div class="form-group" style="padding-bottom:9px;">
                <label class="label-new">Date</label><br>
                <div class="separation-line pl-3">
                  <input type="date" id="filepicker" class="form-control input" placeholder="From" formControlName="endDate"
                      >
                </div>    
              </div>
            </div>
            <div class="col-md-3 pl-0">
              <div class="form-group" style="padding-bottom:9px;">
                <label class="label pl-3">Dealer Name/ID</label><br>
                <div class="separation-line pl-3">
                  <input type="text" class="form-control input" placeholder="Dealer Name/ID" formControlName="dealerNameID"
                     >
                     </div>
              </div>
            </div>
            
            <div class="col-md-3 pl-0">
              <div class="form-group" >
                <label class="label pl-3">Country</label><br>
                  <!-- <input type="text" class="form-control input" placeholder="Country" formControlName="dealerCountry"
                     > -->
                     <div class="separation-line pl-3">
                     <select class="form-control md-4 fac-dropdown" (change)="onCountryChange($event)" formControlName="dealerCountry" >
          
                      <!-- <option class="option" sledisabled hidden>Select Category</option> -->
                      <option value="" selected disabled hidden>Select Country</option>
                      <option class="option" *ngFor="let x of countryList" [value]="x.country_id">{{x.country_name}}
                       
                      </option>
                    </select>
                  </div>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group" style="padding-bottom:9px;">
                <label class="label">State</label><br>
                <select class="form-control md-4 fac-dropdown" (change)="onStateChange($event)" formControlName="dealerState" >
          
                  <!-- <option class="option" sledisabled hidden>Select Category</option> -->
                  <option value="" selected disabled hidden>Select State</option>
                  <option class="option" *ngFor="let x of stateList" [value]="x.state_id">{{x.state_name}}
                   
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-2 pl-0">
              <div class="form-group" style="padding-bottom:9px;">
                <label class="label pl-3">City</label><br>
                <div class="separation-line pl-3">
                <select class="form-control md-4 fac-dropdown" (change)="onCityChange($event)" formControlName="dealerCity" >
          
                  <!-- <option class="option" sledisabled hidden>Select Category</option> -->
                  <option value="" selected disabled hidden>Select City</option>
                  <option class="option" *ngFor="let x of cityList" [value]="x.city_id">{{x.city_name}}
                   
                  </option>
                </select>
              </div>
              </div>
            </div>
            <div class="col-md-2 pl-0">
              <div class="form-group" style="padding-bottom:19px;">
                <label class="label pl-3">Phone Number</label><br>
                <div class="separation-line pl-3">
                  <input type="text" class="form-control input" placeholder="Phone Number" formControlName="dealerPhoneNumber"
                     >
                    </div>
              </div>
            </div>
            <div class="col-md-2 pl-0">
              <div class="form-group" style="padding-bottom:19px;">
                <label class="label pl-3">Location</label><br>
                <div class="separation-line pl-3">
                  <input type="text" class="form-control input" placeholder="Location" formControlName="dealerLocation"
                     >
                    </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group" style="padding:30px 0px 20px 0px;float: right;">
           
                <button mat-raised-button color="search" (click)="searchFilterDealer();">SEARCH</button>&nbsp;&nbsp;
                <button mat-raised-button color="reset"  (click)="resetSearchFilter();" >RESET</button>
              </div>
            </div>
        
          </div>
          </form>
        </div>
    </section>
    <section class="no-padding-top no-padding-bottom" >
      <div class="container-fluid" >
   
      <div class="row" style="padding-top: 20px;padding-bottom: 20px;">
        <div class="col-md-8"  >
       
          <button mat-raised-button color="template" *ngIf="templateData">   <div *ngIf="templateData">
            <a 
              href="{{path}}" 
              class="btn btn-default" 
              style="margin-left: -13px;" 
              target="_self" 
              download="assets/csv/">
              <mdb-icon fas icon="download" style="color: #fff;font-size: 16px;"></mdb-icon>&nbsp;Download Template CSV
            </a>
          </div></button>
        </div>
        <div class="col-md-2">
          <span class="pb-2"  (click)="fileInput.click()"
          style="margin-right: -60px;float: right;color: black;font-weight: 500;font-family: 'Segoe UI';cursor: pointer;font-size: 14px;"
          >

        <input #fileInput type="file" accept=".csv" hidden (change)="handleFileSelect($event)">
<!-- <button mat-button (click)="fileInput.click()">Load Button</button> -->
          <mdb-icon fas icon="upload" style="color: #d0112b;font-size: 16px;"></mdb-icon>&nbsp;&nbsp;<span style="text-decoration: underline;">Import CSV</span> 
        </span>
        </div>
        <div class="col-md-2 pr-3">
          <span class="pb-2"
          style="float: right;color: black;font-weight: 500;font-family: 'Segoe UI';cursor: pointer;font-size: 14px;"
  
          
                  (click)="exporter.exportTable('csv',{fileName:'Dealer_Record'})">
          <mdb-icon fas icon="file-download" style="color: green;font-size: 16px;"></mdb-icon>&nbsp;&nbsp;<span style="text-decoration: underline;">Export to CSV</span> 
        </span>
        </div>
       
      </div>
      </div></section>
    
    <section class="no-padding-bottom">
        <div class="container-fluid">
          <div class="example-container mat-elevation-z8">
            <mat-table matTableExporter [dataSource]="dataSource" matSort #exporter="matTableExporter" [hiddenColumns]="[7]">

              <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Date </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.date|
                  date:'dd-MM-yyyy'}} </mat-cell>
              </ng-container>

              <ng-container matColumnDef="city">
                <mat-header-cell *matHeaderCellDef mat-sort-header> City </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.city}} </mat-cell>
              </ng-container>

              <ng-container matColumnDef="country">
                <mat-header-cell *matHeaderCellDef mat-sort-header>  Country</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.country}} </mat-cell>
              </ng-container>

              <ng-container matColumnDef="dealerID">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Dealer ID </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.dealerID}} </mat-cell>
              </ng-container>  
              
              <ng-container matColumnDef="fullName">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Dealer Name </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.fullName}} </mat-cell>
              </ng-container>  

              <ng-container matColumnDef="location">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Location</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.location}} </mat-cell>
              </ng-container>

              <ng-container matColumnDef="phoneNumber">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Phone Number </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.phoneNumber}} </mat-cell>
              </ng-container>

              <!-- <ng-container matColumnDef="country">
                <mat-header-cell *matHeaderCellDef>Country </mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.country}} </mat-cell>
              </ng-container> -->


              <ng-container matColumnDef="action1">
                <mat-header-cell *matHeaderCellDef> </mat-header-cell>
                <mat-cell *matCellDef="let element"> 
                  <button mat-raised-button color="deactivate" style="width: 80%;" (click)="updateDealerStatus('Deactivate',element.dealerID);" *ngIf="element.status == 'Activate'">Deactivate</button>
                  <button mat-raised-button color="success" style="width: 80%;" (click)="updateDealerStatus('Activate',element.dealerID);" *ngIf="element.status == 'Deactivate'">Activate</button>
                </mat-cell>
              </ng-container>

              <ng-container matColumnDef="action2">
                <mat-header-cell *matHeaderCellDef> </mat-header-cell>
                <mat-cell *matCellDef="let element"> 
                  <!-- <mdb-icon style="color: #005FFF;font-size: small;cursor: pointer;" fas icon="download"
                  mdbTooltip="Download" placement="top"></mdb-icon>
                  &nbsp;&nbsp;&nbsp; -->
                  <mdb-icon style="color: #AF11FF;font-size: small;cursor: pointer;" fas icon="eye"
                      mdbTooltip="View" placement="top" (click)="openDetails()"></mdb-icon>&nbsp;&nbsp;&nbsp;
                  <mdb-icon style="color: #36B36B;font-size: small;cursor: pointer;" fas icon="pen"
                  mdbTooltip="Edit" placement="top" (click)="editDealer()"></mdb-icon>&nbsp;&nbsp;&nbsp;
                  <mdb-icon style="color: #F25262;font-size: small;cursor: pointer;" fas icon="trash"
                  mdbTooltip="Delete" placement="top" (click)="deleteDealer(element.dealerID)">
              </mdb-icon>
                </mat-cell>
              </ng-container>

              <!-- <ng-container matColumnDef="action2">
                <mat-header-cell *matHeaderCellDef></mat-header-cell>
                <mat-cell *matCellDef="let element">
                   <button mat-raised-button color="reset-password" (click)="resetPasswordDealer(dealerList)">Reset Password</button> 
                  </mat-cell>
              </ng-container> -->


              <mat-header-row *matHeaderRowDef="displayedColumns" style="background-color: #D0112B;"></mat-header-row>
              <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
              <tr *matNoDataRow  ><span class="no-data">No data found to display...</span></tr>
            </mat-table>
            <mat-paginator style="outline: none;" [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons></mat-paginator>
          </div>
          <!-- <input type="file" accept=".csv"(change)="handleFileSelect($event)"> -->
        </div>
    </section>
    <div class="overlay" *ngIf="isSpinnerShow">
      <div class="center"  
      style="display: flex; justify-content: center; align-items: center;">
     <mat-progress-spinner 
       color="primary" class="mat-spinner-color"
       mode="indeterminate">
     </mat-progress-spinner></div>
    </div>
    <!-- <a [href]="sourcePath" [download]="fileName" >
      Download
    </a> -->

  </div>
</div>